<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GIPHY Search</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <header>
        <div id="button-view"></div>
    </header>
    <div class="container">
        <div id="form-box">
            <form id="search-form">
                <label for="searcher">Search GIFs</label>
                <input type="text" id="searcher"><br>
                <input type="submit" id="add-gif" value="Search GIFs">
            </form>
        </div>
        <div id="gif-container"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var topics = ["angry", "confused", "do not want", "ugh", "lol", "omg", "oh no", "oh yeah", "yikes", "love you"];
        var limit;
        var button;
        var search;

        function searchGif(search) {
            limit = 10;
            var apiKey = "BSbV64hnIQZ1MJpga9AyT5k5195mKTi3";
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + search + "&limit=" + limit + "&api_key=" + apiKey;
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                for(var j=0; j < limit; j++){
                    console.log(response.data[j].images.fixed_width.url);
                    var gif = $("<div>").html("<img src="+response.data[j].images.fixed_width.url+"/><br><p>Rating: "+response.data[j].rating);
                    $("#gif-container").append(gif);
                }
            });
        }
        $("add-gif").on("click", renderButtons)
        function renderButtons() {
            $("#button-view").empty();
            for (var i = 0; i < topics.length; i++) {
                button = $("<button>").text(topics[i]);
                button.attr("value", topics[i]);
                $("#button-view").append(button);
            }
            $("button").on("click", function () {
                search = this.value;
                $("#gif-container").empty();
                searchGif(search);
            });
        }
        $("#add-gif").on("click", function(event) {
            event.preventDefault();
            search = $("#searcher").val();
            topics.push(search);
            $("#gif-container").empty();
            renderButtons();
            searchGif(search);
        });
        renderButtons();
    </script>
</body>

</html>